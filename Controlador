package ahorcado;

import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

/**
 *
 * @author angelluis
 */
public class Controlador implements KeyListener{
    private Modelo modelo=new Modelo();
    private Ahorcado ventana;
    private Graphics g;
    private int error=4,ne=0;
    private String cadena=modelo.getCosas();
    private char letra;
    private char[] acertadas=new char[cadena.length()];
    private char[] falladas=new char[4];
    public Controlador(Ahorcado v){
       ventana=v; 
    }
    @Override
    public void keyTyped(KeyEvent ke) {
        
    }

    @Override
    public void keyPressed(KeyEvent ke) {
        letra=ke.getKeyChar();
        procesar(letra,cadena);
    }

    @Override
    public void keyReleased(KeyEvent ke) {
        
    }

   public void procesar(char c,String cadena){
      int n=cadena.indexOf(c),n2;
       if(n>=0){
           System.out.println("Encontrado");
           acertadas[n]=c;
           n2=cadena.indexOf(cadena, n);
           while(n2>0){
                if(n2>=1){
                  System.out.println("Encontrado 2Âª");
                  acertadas[n2]=c;
              }
             //Para leer apartir del indice anterior por si hubiera alguna mas
              n2=cadena.indexOf(cadena, n2);
           }
       }         
       else{
           System.out.println("No lo encontro");
           falladas[ne]=c;
           ne++;
           error--;
       }
       System.out.println(error);
       ventana.repaint();
   }

    public int getError() {
        return error;
    }
   
    public int coordenadas(int num){
        return num*100;
    }
    
    public int getLenght(){
        return cadena.length();
    }
    
    public int getIndex(char c){
       return cadena.indexOf(c); 
    }
    
    public char getLetra(){
       return letra; 
    }
    
    public char[] getAcertadas(){
        return acertadas;
    }
    
    public char[] getFalladas(){
        return falladas;
    }
}
